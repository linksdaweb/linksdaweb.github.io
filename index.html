<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>dvzk3 â€¢ Links da Web</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="topbar">
  <div class="left">
    <button id="menuBtn" class="hamb" onclick="toggleMenu()">â˜°</button>
    <div class="brand">
      <div class="ghost">ðŸ‘»</div>
      <div class="title">dvzk3 Links</div>
    </div>
  </div>
</header>

<!-- MENU LATERAL SIMPLES (sem login) -->
<nav id="sidemenu" class="sidemenu">
  <button class="close" onclick="toggleMenu()">âœ– Fechar</button>
  <a href="index.html">InÃ­cio</a>
  <!-- Login Ã© pÃ¡gina secreta: nÃ£o colocar link aqui -->
  <a href="https://linksdaweb.github.io/linksdaweb/login.html" style="display:none">Login ADM</a>
</nav>

<main class="main">
  <section class="hero">
    <h1>Seus links favoritos â€” dvzk3</h1>
    <p class="sub">Clique e abra no navegador. Adicione/Remova via painel ADM.</p>
  </section>

  <section id="linksArea" class="linksArea">
    <!-- Cards de links carregados via JS -->
    <div class="loading">Carregando linksâ€¦</div>
  </section>

  <footer class="rodape">
    Â© 2025 dvzk3 â€” Todos os direitos reservados
  </footer>
</main>

<script>
// CONFIG (nÃ£o mude se nÃ£o souber)
const BIN_ID = "6938bf13d0ea881f401e3735";
const API_KEY = "$2a$10$CAVCHZsnLuFy.mPUgCZp5eUY8rEJ7SY2xLeYifcsTeT7Gbkmrk4YW";
const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

// Menu
function toggleMenu(){
  const menu = document.getElementById('sidemenu');
  menu.style.left = menu.style.left === '0px' ? '-260px' : '0px';
}

// Carregar links do JSONBin e renderizar
async function loadLinks(){
  try{
    const res = await fetch(BIN_URL, { headers: { "X-Master-Key": API_KEY }});
    const json = await res.json();
    const links = (json.record && json.record.links) ? json.record.links : [];
    const area = document.getElementById('linksArea');
    area.innerHTML = '';
    if(!links.length){
      area.innerHTML = '<div class="empty">Nenhum link ainda. Adicione pelo ADM.</div>';
      return;
    }
    links.forEach(l => {
      const div = document.createElement('div');
      div.className = 'linkCard';
      div.innerHTML = `<a href="${l.url}" target="_blank" rel="noopener noreferrer">
                        <div class="linkTitle">${escapeHtml(l.name)}</div>
                        <div class="linkMeta">${escapeHtml(l.cat || '')}</div>
                       </a>`;
      area.appendChild(div);
    });
  }catch(err){
    document.getElementById('linksArea').innerHTML = '<div class="err">Erro ao carregar links. Verifique sua internet.</div>';
    console.error(err);
  }
}

// pequena funÃ§Ã£o pra escapar html
function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

loadLinks();
</script>

</body>
</html>
